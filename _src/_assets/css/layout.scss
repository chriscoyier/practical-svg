.masthead {
  display: flex;
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
  flex-direction: row;
  gap: 5%;
  align-items: center;
  position: fixed;
  width: 100%;
  top: 0;
  left: 0;
  z-index: 2;
  background: #fefefe;
}
.outer-wrap {
  padding: 0 1em 6.5em 1em;
}
.inner-wrap {
  margin: auto;
  max-width: 100%;
  width: 45rem;
}
.mast-wrap {
  padding: 0 5vw;
  margin: auto;
  max-width: 100%;
  width: 60rem;
}
.logo {
  margin: 0;
  padding: 0.55em 0 0.5em 0;
}

.cover {
  background-color: #0000aa;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='99.7' height='172' viewBox='0 0 200 345'%3E%3Cdefs%3E%3Cfilter id='d' width='200%25' height='200%25'%3E%3CfeGaussianBlur in='SourceGraphic' stdDeviation='12'%3E%3C/feGaussianBlur%3E%3C/filter%3E%3ClinearGradient id='a' gradientUnits='objectBoundingBox' x1='0' y1='1' x2='0' y2='0'%3E%3Cstop offset='0' stop-color='%236846c1'/%3E%3Cstop offset='1' stop-color='%233d21b3'/%3E%3C/linearGradient%3E %3CradialGradient id='b' gradientUnits='objectBoundingBox' cx='.5' cy='.5' r='1'%3E%3Cstop offset='0' stop-color='%230f0498'/%3E%3Cstop offset='1' stop-color='%2318097d'/%3E%3C/radialGradient%3E%3CradialGradient id='c' gradientUnits='objectBoundingBox' cx='.5%25' cy='.5%25' r='4'%3E%3Cstop offset='0' stop-color='%233d21b3'/%3E%3Cstop offset='1' stop-color='%230f0498'/%3E%3C/radialGradient%3E%3Csymbol id='e'%3E%3Cpolygon fill='url(%23a)' points='200 57.5 100 0 0 57.5 100 115'/%3E%3Cpolygon fill='url(%23b)' points='100 115 0 57.5 0 172.5 100 230'/%3E%3Cpolygon fill='url(%23c)' points='100 115 100 230 200 172.5 200 57.5'/%3E%3C/symbol%3E%3Csymbol id='f'%3E%3Cpolygon filter='url(%23d)' fill-opacity='0.4' points='200 172.5 113.5 107.5 100 0 87.5 107.5 0 172.5 100.5 129.5'/%3E%3C/symbol%3E%3C/defs%3E%3Cuse xlink:href='%23e' y='-57.5'/%3E%3Cuse xlink:href='%23e' x='100' y='115'/%3E%3Cuse xlink:href='%23e' x='-100' y='115'/%3E%3Cuse xlink:href='%23e' y='287.5'/%3E%3Cuse xlink:href='%23f' x='-100'/%3E%3Cuse xlink:href='%23f' x='100'/%3E%3Cuse xlink:href='%23f' y='172.5'/%3E%3Cuse xlink:href='%23f' y='-172.5'/%3E%3Cuse xlink:href='%23f' x='-100' y='345'/%3E%3Cuse xlink:href='%23f' x='100' y='345'/%3E%3Cuse xlink:href='%23f' x='200' y='172.5'/%3E%3Cuse xlink:href='%23f' x='200' y='172.5'/%3E%3C/svg%3E");
  padding-top: clamp(6.25em, 15vw, 12em);
  .outer-wrap {
    padding-bottom: 1.75%;
  }
}
.title-section h1 {
  margin: 0;
  padding: 0.12em 0;
}
.ctas {
  display: flex;
  flex-direction: row;
  gap: 2.5%;
  position: relative;
  top: 2em;
  justify-content: center;
}
.btn-cta {
  padding: 0.65em 1em 0.5em 1em;
}

figure {
  margin: 2em 0 3em;
  max-width: 100vw;
  padding: 2em 0;
  border: dashed #ccc;
  border-width: 1px 0;
  img {
    margin: 0 auto 0.825em auto;
    display: block;
  }
}
@media (min-width: 52em) {
  figure {
    margin: 2em -5vw 3em;
  }
}

.footer {
  background: #f2f2f2;
  margin-top: 5em;
  padding: 2em 0;
}

.inner-nav {
  margin-top: 4em;
  padding-top: 1em;
  border-top: 4px solid #f2f2f2;
}
.repel {
  display: flex;
  flex-wrap: wrap;
  gap: 2%;
  justify-content: space-between;
}
.book-body {
  padding-top: 2.5%;
}

.copyright p {
  margin: 2em 0;
}

.chapter-opener {
  padding: 12% 1em 0;
  background: #ddd;
}

.skiplink {
  position: relative;
  z-index: 3;
}

@keyframes nav-in {
  from {
    opacity: 0;
    transform: scale(0.8);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
.modal {
  background: none;
  color: rgba(255, 255, 255, 0.9);
  padding: 0;
  border: none;
  width: 100%;
  height: 100%;
  &[open] {
    display: flex;
  }
  &::backdrop {
    padding: 0;
    margin: 0;
    opacity: 0.975;
  }
  ol {
    margin: 0;
    padding: 0;
    list-style: none;
  }
  nav {
    margin: auto;
    max-width: 30em;
  }
  &[open] nav {
    animation: nav-in 0.125s normal forwards ease-in-out;
  }
  li {
    margin: 2em;
  }
}
.modal::backdrop {
  background: #6185c3;
}

.mininav {
  display: flex;
}
.toc-btn {
  display: flex;
  align-items: center;
  padding: 0;
  background: none;
  border: none;
  cursor: pointer;
  [aria-hidden="true"] {
    display: block;
  }
  svg {
    width: 3em;
    height: 2em;
    margin-right: 0.5em;
    fill: #777;
  }
  @media (max-width: 35em) {
    svg {
      margin-right: 0;
    }
    span {
      display: none;
    }
  }
}
.btn-close {
  background: none;
  border: none;
  height: 3.25em;
  display: flex;
  position: absolute;
  top: 0;
  right: 1em;
  cursor: pointer;
  &:after {
    content: "Ã—";
    color: rgba(255, 255, 255, 0.7);
    line-height: 0.45;
    height: 100%;
    font-size: 5em;
    transition: color 0.15s linear;
  }
  &:hover:after {
    color: rgba(255, 255, 255, 1);
  }
}

.inner-nav {
  padding-top: 1.5em;
  span {
    flex: 1 1 auto;
  }
  a {
    display: flex;
    flex-wrap: no-wrap;
    flex-direction: row;
    padding: 1em 0;
    svg {
      height: 2.5ch;
      width: 1em;
      transition: margin 0.2s ease-in-out;
    }
    &.chap-next {
      justify-content: flex-end;
      svg {
        margin-left: 1.4em;
      }
      &:hover svg {
        margin-left: 1em;
      }
    }
    &.chap-prev {
      svg {
        transform: rotate(180deg);
        margin-right: 1.4em;
      }
      &:hover svg {
        margin-right: 1em;
      }
    }
  }
  [aria-hidden] {
    display: block;
  }
}
